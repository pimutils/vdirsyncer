# Generated by scripts/make_travisconf.py

sudo: true
language: python

install:
    - if [ "$TRAVIS_PYTHON_VERSION" == "pypy" ]; then
        git clone https://github.com/yyuu/pyenv.git ~/.pyenv;
        PYENV_ROOT="$HOME/.pyenv";
        PATH="$PYENV_ROOT/bin:$PATH";
        eval "$(pyenv init -)";
        pyenv install pypy-4.0.1;
        pyenv global pypy-4.0.1;
        python --version;
        pip --version;
      fi
    - "pip install -U pip"
    - "pip install wheel"
    - "make -e install-dev"
    - "make -e install-$BUILD"

script:
    - "make -e $BUILD"

matrix:
    include:
        - python: 2.7
          env: BUILD=style
        - python: 2.7
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=devel
        - python: 2.7
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=release
        - python: 2.7
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=minimal
        - python: 2.7
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=devel
        - python: 2.7
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=release
        - python: 2.7
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=minimal
        - python: 2.7
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=devel
        - python: 2.7
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=release
        - python: 2.7
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=minimal
        - python: 2.7
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=devel
        - python: 2.7
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=release
        - python: 2.7
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=minimal
        - python: 2.7
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=devel
        - python: 2.7
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=release
        - python: 2.7
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=minimal
        - python: 2.7
          env: BUILD=test
          branches: {"exclude": ["auto"]}
        - python: 2.7
          env: BUILD=style
          branches: {"exclude": ["auto"]}
        - python: 3.3
          env: BUILD=style
        - python: 3.3
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=devel
        - python: 3.3
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=release
        - python: 3.3
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=minimal
        - python: 3.4
          env: BUILD=style
        - python: 3.4
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=devel
        - python: 3.4
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=release
        - python: 3.4
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=style
        - python: 3.5
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=devel
        - python: 3.5
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=release
        - python: 3.5
          env: BUILD=test REMOTESTORAGE_SERVER=mysteryshack REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=devel
        - python: 3.5
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=release
        - python: 3.5
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=devel
        - python: 3.5
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=release
        - python: 3.5
          env: BUILD=test DAV_SERVER=owncloud REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=devel
        - python: 3.5
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=release
        - python: 3.5
          env: BUILD=test DAV_SERVER=baikal REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=devel
        - python: 3.5
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=release
        - python: 3.5
          env: BUILD=test DAV_SERVER=davical REQUIREMENTS=minimal
        - python: 3.5
          env: BUILD=test
          branches: {"exclude": ["auto"]}
        - python: 3.5
          env: BUILD=style
          branches: {"exclude": ["auto"]}
        - python: pypy
          env: BUILD=style
        - python: pypy
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=devel
        - python: pypy
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=release
        - python: pypy
          env: BUILD=test DAV_SERVER=radicale REQUIREMENTS=minimal


